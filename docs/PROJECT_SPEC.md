# Catus 프로젝트 명세서

## 1. 프로젝트 개요
**프로젝트명**: Catus (카투스)
**목적**: AI 고양이 '달이'와 함께하는 일기 및 멘탈 헬스 케어 서비스
**플랫폼**: 웹 애플리케이션 (모바일 최적화)

## 2. 주요 기능 명세

### 2.1 사용자 인증 (Authentication)
- **로그인**: 카카오톡 소셜 로그인을 지원하여 간편하게 접속할 수 있습니다.
- **온보딩**: 서비스의 목적과 사용법을 안내하는 초기 설정 과정입니다.

### 2.2 메인 홈 (Home)
- **Big 5 성향 분석 (Cactus)**: 선인장 아이콘을 통해 사용자의 Big 5 성향 분석 결과(초기 분석, 업데이트, 차트)를 시각적으로 확인합니다.
- **달이 (Dali)**: 평소에는 곁에 머물며, **익명의 그림일기**가 도착했을 때 상호작용하여 내용을 전달해줍니다.
- **종이비행기 (Paper Plane)**: 익명의 **응원 메시지**가 도착하면 종이비행기가 날아오며, 클릭 시 메시지를 확인할 수 있습니다.
- **채팅 입력바**: 화면 하단의 채팅창을 통해 언제든지 '달이'와 대화를 시작할 수 있습니다.

### 2.3 AI 채팅 (Chat)
- **접근성**: 별도의 페이지 이동 없이 하단의 채팅바를 통해 즉시 대화가 가능합니다.
- **공감 및 위로**: 사용자의 감정을 분석하여 적절한 위로와 공감의 메시지를 제공합니다.

### 2.4 캘린더 및 일기 (Calendar & Diary)
- **월간 캘린더**: 작성한 일기와 그날의 감정을 달력 형태로 한눈에 확인합니다.
- **일기 상세**: AI가 요약하고 분석한 일기 내용을 상세하게 조회합니다.
- **일기 생성**: 대화 내용을 바탕으로 AI가 자동으로 일기를 생성해줍니다.

### 2.5 마음 편지 (Letters)
- **응원 편지**: 힘들 때 위로가 되는 편지를 받거나, 과거의 나에게 편지를 쓸 수 있는 공간입니다.

### 2.6 설정 (Settings)
- **알림 설정**: 일기 작성 알림, 응원 알림 등을 설정합니다.
- **계정 관리**: 로그아웃 및 회원 탈퇴 기능을 제공합니다.

## 3. 핵심 기능 (Core Features - Gemini 3.0 Integration)

### 3.1 AI 에이전트 '달이(Dali)'
- **페르소나**: 사용자에게 무조건적인 공감과 지지를 보내는 "영원한 단짝 친구" (친화성 0.9, 외향성 0.75).
- **대화 스타일**: 100% 반말 사용, 구어체 및 감탄사/이모지 적절 활용, 공감 중심의 대화.
- **능동형 질문 (Proactive Questioning)**: 사용자의 성향 데이터가 부족할 경우, 자연스럽게 관련 질문을 유도하여 데이터를 수집합니다.

### 3.2 하이브리드 성향 분석 (Hybrid Analysis)
- **Big 5 모델**: 개방성, 성실성, 외향성, 친화성, 신경성 5가지 척도로 사용자 분석.
- **분석 파이프라인**:
    1. **전처리**: 신조어/은어 정규화 (예: "기빨려" -> "피곤").
    2. **필터링**: 성격과 무관한 중립 문장 제외 (Zero-Score Filtering).
    3. **LLM 추론**: Gemini 3.0을 활용한 심층 맥락 분석.
- **주간 리포트**: 비동기 분석을 통해 주간 성향 변화를 추적하고 리포트를 제공합니다.

### 3.3 안전 및 윤리 (Safety & Ethics)
- **위기 감지**: 자해/자살 키워드 감지 시 기계적인 조언 대신, "많이 힘들었구나, 내가 옆에 있어줄게"와 같이 진심 어린 공감과 위로를 건네는 친구로서 대응합니다.
- **프롬프트 방어**: 해킹 시도(탈옥)에 대해 유머러스하고 단호하게 거절하는 방어 기법을 적용합니다.

## 4. 기술 스택 (Tech Stack)

### Frontend
- **Core**: React 19, Vite
- **State**: React Query (Server State), Context API (Client State)
- **Storage**: IndexedDB (Dexie.js) - 대화 내역 로컬 저장 (Local-First Architecture)
- **Styling**: TailwindCSS, Framer Motion

### Backend (Spring Boot Migration Target)
- **Framework**: Spring Boot 3.x
- **AI**: Spring AI (Gemini 3.0 Integration, ChatClient Fluent API)
- **Batch**: Spring Batch (대용량 로그 분석, 주간 리포트 생성)
- **Database**: PostgreSQL (JSONB 활용하여 유연한 성향 데이터 저장)
- **Security**: Spring Security + JWT (OAuth2 Kakao)
- **Real-time**: WebSocket / SSE (타이핑 인디케이터 및 실시간 알림)

## 5. 사용자 흐름 (User Flow)
1. **접속 및 로그인**: 카카오 로그인으로 시작
2. **홈 화면**:
    - **성향 확인**: 선인장 아이콘 클릭 -> Big 5 분석 차트 확인.
    - **대화하기**: 하단 채팅바 입력 -> '달이'와 일상 대화.
    - **알림 확인**: 종이비행기(응원 메시지) 또는 달이(그림일기) 클릭.
3. **일기 확인**: 다음 날, 대화 내용을 바탕으로 생성된 그림일기 및 분석 결과 확인
4. **회고**: 캘린더를 통해 지난 감정 흐름 및 주간 성향 리포트 확인

## 6. 디자인 컨셉
- **따뜻함 & 편안함**: 파스텔 톤의 색감과 부드러운 UI 요소 사용
- **친근함**: 고양이 캐릭터와 대화하듯 자연스러운 인터랙션
