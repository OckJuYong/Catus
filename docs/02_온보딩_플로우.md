# 사용자 온보딩 플로우

## 1. 온보딩 개요

**목적**: 신규 사용자 기본 정보 수집 및 개인화된 AI 대화 제공

**진행 시점**: 카카오 로그인 후 최초 1회

**건너뛰기**: 가능 (다음 로그인 시 재진입)

---

## 2. 온보딩 플로우 다이어그램

```
카카오 로그인 완료
    ↓
온보딩 완료 확인 (localStorage)
    ↓
┌──────────┬──────────┐
│   미완료  │   완료    │
↓          ↓
온보딩 시작  홈 화면
    ↓
┌─────────┬─────────┐
│진행할게요 │건너뛰기  │
↓          ↓
질문 1/4    홈 화면
    ↓
질문 2/4
    ↓
질문 3/4
    ↓
질문 4/4
    ↓
완료 버튼
    ↓
POST /users/onboarding
    ↓
localStorage 완료 표시
    ↓
홈 화면
```

---

## 3. 온보딩 화면 구성

### 3.1 시작 화면

**UI 요소**
- 고양이 이미지 + 말풍선
- 안내 문구
- 버튼: "네, 진행할게요", "건너뛰기"

**애니메이션**
| 요소 | 효과 | 지연 |
|-----|------|------|
| 말풍선 | scale 0→1 | 0.5s |
| 고양이 | y 30px→0 | 1.2s |
| 문구 | opacity 0→1 | 0.8s |
| 버튼 | opacity 0→1 | 1.2s |

---

### 3.2 질문 화면 (4단계)

**질문 구조**
| # | 질문 | 타입 | 옵션 | 저장 키 |
|---|-----|------|------|---------|
| 1 | 성별을 알려주세요 | 선택 | "여자", "남자", "선택 안함" | gender |
| 2 | 연령대를 선택해주세요 | 선택 | "10대", "20대", "30대", "40대 이상" | ageGroup |
| 3 | 현재 직업은? | 선택 | "학생", "직장인", "기타" | occupation |
| 4 | 서비스 사용 목적 | 텍스트 | 자유 입력 | purpose |

**화면 요소**
- 프로그레스 바: 진행률 표시 (1/4, 2/4, 3/4, 4/4)
- 이전 버튼: 이전 질문으로 돌아가기
- 다음/완료 버튼: 답변 선택 시 활성화
- 건너뛰기: 모든 화면에서 가능

---

## 4. API 연동

### 4.1 온보딩 정보 전송

**엔드포인트**: `POST /users/onboarding`

**Request Body**
```typescript
{
  gender: string,      // "여자" | "남자" | "선택 안함"
  ageGroup: string,    // "10대" | "20대" | "30대" | "40대 이상"
  occupation: string,  // "학생" | "직장인" | "기타"
  purpose: string      // 자유 텍스트
}
```

**Response**
```typescript
{
  message: string,
  user: {
    id: string,
    onboardingCompleted: boolean
  }
}
```

---

### 4.2 완료 처리

1. API 호출 성공 시
2. localStorage 저장: `catus_onboarding_completed = true`
3. 홈 화면으로 이동

---

## 5. 예외 처리

### 5.1 네트워크 오류

**처리**
1. 에러 메시지 표시
2. 재시도 버튼 제공
3. 로컬 상태 유지 (데이터 손실 방지)

---

### 5.2 건너뛰기

**처리**
1. 온보딩 정보 미저장
2. 홈 화면 이동
3. 다음 로그인 시 재진입

---

### 5.3 중복 제출 방지

**처리**
1. 완료 버튼 클릭 시 비활성화
2. 로딩 인디케이터 표시
3. API 응답 대기 후 화면 전환

---

## 6. 참고사항

### 6.1 localStorage 키
- `catus_onboarding_completed`: boolean

### 6.2 설정 페이지 연동
- "온보딩 다시하기" 버튼으로 재진행 가능
- localStorage 삭제 → 온보딩 시작 화면
